# 微信公众号 Markdown 渲染组件设计指南

## 1. 整体设计风格

### 1.1 设计理念
- 现代、简洁、易用的设计风格
- 专注于微信公众号排版优化
- 支持多主题切换，满足不同内容类型需求
- 响应式设计，适配各种设备尺寸

### 1.2 核心视觉元素
- **玻璃拟态效果**：顶部设置栏采用半透明玻璃拟态设计，增强视觉层次感
- **圆角设计**：所有组件使用圆角边框，增强现代感和友好度
- **平滑过渡**：主题切换、交互反馈等均采用平滑过渡动画
- **图标化控制**：所有控制按钮使用直观图标，减少文字占用空间

## 2. 主题系统设计

### 2.1 主题列表
| 主题名称 | 设计风格 | 配色方案 | 适用场景 |
|---------|---------|---------|---------|
| 古典主题（默认） | 暖色调，模拟古典书籍风格 | 背景：#f8f5f0；文字：#3a2e25；强调色：#8b4513 | 文化类、历史类内容 |
| 暗黑主题 | 深色背景，高对比度 | 背景：#1a1a1a；文字：#e0e0e0；强调色：#ff4500 | 夜间阅读、专业技术内容 |
| 科技主题 | 深蓝色调，科技感十足 | 背景：#0a0e27；文字：#ffffff；强调色：#00d4ff | 技术类、科技类内容 |
| 简约主题 | 纯白背景，简洁明了 | 背景：#ffffff；文字：#333333；强调色：#2196f3 | 干货类、技术类内容 |
| 梦幻主题 | 淡蓝紫色调，梦幻柔和 | 背景：#f0f4ff；文字：#374151；强调色：#8b5cf6 | 情感类、生活类内容 |

### 2.2 主题变量
```css
:root {
    --bg-primary: #f8f5f0;          /* 主背景色 */
    --bg-secondary: #f0ebe5;        /* 次要背景色 */
    --text-primary: #3a2e25;        /* 主文字色 */
    --text-secondary: #6b5b4e;      /* 次要文字色 */
    --accent-color: #8b4513;        /* 强调色 */
    --border-color: #d4c5b8;        /* 边框色 */
    --shadow: 0 2px 8px rgba(139, 69, 19, 0.1); /* 阴影 */
    --glass-bg: rgba(248, 245, 240, 0.8); /* 玻璃背景 */
    --glass-border: rgba(139, 69, 19, 0.2); /* 玻璃边框 */
    --heading-color: #3a2e25;       /* 标题色 */
    --code-bg: #f0ebe5;             /* 代码块背景 */
    --blockquote-bg: #f0ebe5;        /* 引用块背景 */
    --blockquote-border: #d4c5b8;    /* 引用块边框 */
}
```

## 3. 组件设计

### 3.1 顶部设置栏
- **位置**：固定在页面顶部，居中显示
- **样式**：玻璃拟态效果，半透明背景，模糊效果
- **内容**：
  - 主题切换按钮（带下拉菜单）
  - 视图切换按钮（手机/桌面）
  - 复制按钮
- **交互**：
  - 鼠标悬停时按钮变色并轻微上浮
  - 主题切换下拉菜单平滑展开/收起

### 3.2 主题切换组件
- **触发方式**：点击主题按钮打开下拉菜单
- **菜单位置**：主题按钮下方，居中对齐
- **主题选项**：5个主题，每个主题带有颜色预览块
- **交互**：
  - 鼠标悬停时选项背景变色
  - 点击后应用对应主题并关闭菜单

### 3.3 视图切换组件
- **样式**：圆角边框，当前选中状态高亮
- **选项**：手机视图（默认）和桌面视图
- **交互**：点击切换视图，平滑过渡

### 3.4 复制按钮
- **样式**：圆角按钮，图标化设计
- **交互**：点击后复制内容，显示成功反馈（图标变化）

### 3.5 预览区域
- **手机模式**：宽度375px，圆角边框，模拟手机屏幕
- **桌面模式**：宽度800px，居中显示
- **滚动**：内容超出时可垂直滚动，滚动条自定义样式
- **背景**：根据当前主题动态变化

## 4. Markdown 样式设计

### 4.1 标题样式
- **H1**：2.5rem，加粗，底部外边距1.5rem
- **H2**：2rem，加粗，左侧带主题色竖线和图标
- **H3**：1.5rem，加粗，顶部外边距1.25rem
- **标题图标**：根据主题和标题类型动态变化

### 4.2 正文样式
- **字体大小**：1rem
- **行高**：1.7
- **颜色**：根据当前主题变化
- **链接**：使用主题强调色，无下划线，悬停时显示下划线

### 4.3 列表样式
- **无序列表**：默认样式，左侧内边距1.5rem
- **有序列表**：默认样式，左侧内边距1.5rem
- **列表项**：底部外边距0.5rem，行高1.6

### 4.4 引用块样式
- **背景**：次要背景色
- **边框**：左侧4px主题色边框
- **圆角**：8px
- **内边距**：1rem 1.5rem
- **字体**：斜体，次要文字色

### 4.5 代码块样式
- **背景**：次要背景色
- **圆角**：12px
- **macOS 风格**：顶部带红黄绿装饰圆点
- **代码高亮**：默认使用 GitHub Dark 风格
- **内边距**：40px 16px 16px（顶部预留装饰区域）
- **字体**：等宽字体，14px

## 5. 交互设计

### 5.1 主题切换
- **触发方式**：点击主题按钮，选择对应主题
- **过渡效果**：所有样式属性（背景色、文字色、边框色等）均有0.3s平滑过渡
- **视觉反馈**：当前主题在设置栏中高亮显示

### 5.2 视图切换
- **触发方式**：点击视图切换按钮
- **过渡效果**：预览区域宽度平滑变化
- **状态指示**：当前视图按钮高亮显示

### 5.3 复制功能
- **触发方式**：点击复制按钮
- **视觉反馈**：复制成功后按钮图标变为对勾，1秒后恢复
- **功能实现**：复制预览区域HTML内容，支持直接粘贴到微信公众号

### 5.4 滚动交互
- **滚动条样式**：自定义滚动条，使用主题强调色
- **固定元素**：顶部设置栏在内容滚动时保持固定

## 6. 响应式设计

### 6.1 设备适配
- **手机模式**：宽度375px，模拟安卓手机屏幕
- **桌面模式**：宽度800px，宽屏居中卡片布局
- **小屏幕适配**：屏幕宽度小于768px时，设置栏垂直排列

### 6.2 响应式断点
- **768px**：设置栏布局从水平变为垂直
- **375px**：预览区域宽度自适应屏幕宽度

## 7. 代码实现规范

### 7.1 CSS 设计规范
- 使用 CSS 变量管理主题配色
- 采用 BEM 命名规范（Block-Element-Modifier）
- 所有动画效果使用 CSS transitions
- 避免使用复杂的嵌套选择器
- 优先使用 Flexbox 和 Grid 布局

### 7.2 JavaScript 交互规范
- 使用事件委托优化事件处理
- 避免直接操作 DOM，优先使用状态管理
- 所有交互都应有适当的视觉反馈
- 代码模块化，便于维护和扩展

### 7.3 性能优化
- 使用 CSS 变量减少样式计算
- 优化动画性能，避免使用会触发重排的属性
- 懒加载非必要资源
- 减少 DOM 操作次数

## 8. 图标设计规范

### 8.1 图标使用原则
- 使用 Font Awesome 图标库
- 图标与功能高度相关
- 图标大小统一（1.25rem）
- 图标颜色与主题协调

### 8.2 图标映射
| 功能 | 图标 |
|-----|-----|
| 主题切换 | fa-palette |
| 手机视图 | fa-mobile-alt |
| 桌面视图 | fa-desktop |
| 复制 | fa-copy |
| 复制成功 | fa-check |

### 8.3 标题图标
| 标题类型 | 古典主题 | 暗黑主题 | 科技主题 | 简约主题 | 梦幻主题 |
|---------|---------|---------|---------|---------|---------|
| 功能特性 | 📋 | 📋 | 📊 | 📋 | ✨ |
| 代码示例 | 💻 | 💻 | 🔧 | 💻 | 💫 |
| 响应式设计 | 📱 | 📱 | 📱 | 📱 | 📱 |

## 9. 微信公众号兼容性

### 9.1 样式限制
- 所有样式必须内联到 HTML 元素中
- 不支持外部 CSS 文件
- 不支持某些 CSS 属性（如 position: fixed, transform 等）
- 不支持 JavaScript

### 9.2 代码转换策略
- 使用 juice 库将 CSS 样式内联到 HTML 元素
- 过滤掉微信公众号不支持的 CSS 属性
- 转换不支持的 HTML 标签（如 div -> section）
- 确保复制后的内容可直接粘贴到微信公众号

## 10. 开发建议

### 10.1 组件化开发
- 将设置栏、预览区、主题切换等拆分为独立组件
- 组件间通过 props 传递数据和事件
- 使用 TypeScript 进行类型定义

### 10.2 状态管理
- 主题状态使用 React Context 或 Redux 管理
- 视图模式状态局部管理
- 复制状态通过组件内部状态管理

### 10.3 测试策略
- 单元测试：测试组件功能和样式
- 集成测试：测试组件间交互
- 视觉回归测试：确保主题切换等功能正常
- 微信公众号兼容性测试：验证复制后的内容在公众号中显示正常

## 11. 后续扩展建议

### 11.1 功能扩展
- 支持自定义主题
- 支持更多代码高亮风格
- 支持图片上传和优化
- 支持表格样式自定义
- 支持公式渲染

### 11.2 性能优化
- 实现虚拟滚动，优化长内容渲染
- 优化主题切换性能
- 懒加载代码高亮库

### 11.3 设计优化
- 支持更多主题类型
- 优化移动端体验
- 增强交互反馈

## 12. 设计文件

- **UI 原型**：`docs/ui-design.html`
- **需求文档**：`docs/微信公众号适配型 Markdown 渲染组件 - 需求分析文档.md`
- **技术架构**：`docs/技术架构设计文档.md`

---

本设计指南基于当前 UI 原型，旨在为后续开发提供清晰的设计规范和参考。开发过程中应严格遵循本指南，确保最终产品与设计预期一致。