# 微信公众号适配型 Markdown 渲染组件 - 需求分析文档

## 一、项目背景

微信公众号编辑器原生支持 Markdown 渲染能力有限，自定义排版成本高，且不同开发者重复开发适配逻辑导致效率低下。为解决这一痛点，需开发一款专门针对微信公众号样式优化的通用 Markdown 渲染组件，以 NPM 包形式发布，支持开发者快速集成，实现 Markdown 文本到微信公众号适配排版的一键渲染，降低开发成本。

## 二、核心目标

1. 提供轻量、易用的 NPM 包，支持 Markdown 文本快速渲染为微信公众号兼容样式；

2. 覆盖实时预览、主题切换、响应式布局等核心功能，满足多样化排版需求；

3. 支持灵活配置，允许开发者自定义设置按钮位置、显示状态等，提升组件适配性。

## 三、功能需求

### 3.1 核心渲染与预览功能

- 组件需接收外部传入的 Markdown 文本内容作为输入参数；

- 支持实时响应外部 Markdown 文本的变化，自动重新渲染预览效果，无需手动触发刷新。

### 3.2 主题切换功能

- 预设 5 个适配微信公众号排版的主题，默认加载第一个主题；

- 支持用户手动切换主题，5 个预设主题如下：

    1. 古典主题（默认）：暖色调设计，模拟古典书籍的配色风格，适合文化类、历史类内容；

    2. 暗黑主题：深色背景搭配红色强调色，适合夜间阅读和专业场景；

    3. 科技主题：深蓝色背景搭配亮蓝色强调色，科技感十足，适合技术类内容；

    4. 简约主题：纯白背景，简洁明了，突出内容，适合干货类、技术类内容；

    5. 梦幻主题：淡蓝色背景搭配紫色强调色，梦幻柔和，适合情感类、生活类内容。

### 3.3 代码块样式优化

- 代码块需添加 Mac 风格窗口装饰元素（含标题栏、关闭/最小化/最大化图标）；

- 代码块默认使用 github-dark 风格配色，保持代码可读性。

### 3.4 响应式布局支持

- 支持两种视图模式：手机视图、桌面视图；

- 默认展示手机视图，可手动切换或自动适配屏幕尺寸；

- 视图切换后，排版布局（字体大小、间距、代码块宽度等）自动适配对应设备样式。

### 3.5 内容复制功能

- 提供复制按钮，支持复制预览区域的渲染后内容；

- 复制后的内容需自动转换为微信公众号编辑器支持的样式，粘贴后可保持排版一致性（如字体、间距、代码块样式、列表格式等）。

### 3.6 设置按钮展示规则

- 设置按钮默认居中对齐，固定展示在预览区域顶部；

- 内容滚动时，设置按钮保持顶部固定定位，不随内容滚动；

- 设置按钮以图标形式展示（如设置、主题、视图切换、复制等功能图标），不占用过多排版空间。

### 3.7 设置按钮显示控制

- 支持通过配置参数控制顶部设置按钮的显示/隐藏状态；

- 默认状态为“显示”，开发者可通过组件 API 手动关闭显示。

### 3.8 设置按钮自定义能力

- 组件需暴露设置按钮相关功能模块（如主题切换、视图切换、复制等按钮）；

- 允许使用方（开发者）自定义设置按钮的位置（如顶部左侧、底部、悬浮等）、排版方式（横向排列、纵向排列等）。

## 四、非功能需求

### 4.1 易用性

- 提供简洁清晰的 API 文档，集成步骤不超过 3 步；

- 组件初始化配置简单，支持默认配置快速启动，无需复杂参数设置。

### 4.2 兼容性

- 支持主流现代浏览器（Chrome、Firefox、Safari、Edge）；

- 适配微信公众号编辑器的网页环境，复制后的内容粘贴到公众号编辑器无排版错乱。

### 4.3 性能

- 中等长度 Markdown 文本（约 5000 字）渲染响应时间≤300ms；

- 文本内容变化时，实时渲染无明显卡顿，不阻塞页面其他操作。

### 4.4 轻量性

- NPM 包体积≤500KB（不含冗余依赖）；

- 不强制依赖大型框架（如 Vue、React 可按需适配，或提供无框架版本）。

### 4.5 可扩展性

- 支持后续扩展自定义主题、自定义代码块样式等功能；

- 预留钩子函数，允许开发者扩展渲染规则（如自定义 Markdown 语法解析）。

## 五、用户场景

1. 公众号运营工具开发者：需在工具中集成 Markdown 转公众号排版功能，快速实现预览与复制；

2. 独立开发者：开发个人公众号辅助工具，需要轻量、无需二次开发排版逻辑的渲染组件；

3. 企业内容团队：搭建内部公众号内容管理系统，需适配多场景排版需求，支持自定义配置。

## 六、项目边界

1. 组件仅负责 Markdown 文本到微信公众号适配样式的渲染与预览，不包含 Markdown 文本编辑功能（仅接收外部输入文本）；

2. 不涉及微信公众号的内容发布、保存、接口调用等功能，仅聚焦“渲染-预览-复制”核心流程；

3. 预设主题仅提供 5 种，不支持用户自定义新增主题（可通过后续版本扩展）。